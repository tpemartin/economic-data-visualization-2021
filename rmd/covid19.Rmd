
## Covid 19

```{r}
econDV2::Object(covid19)
covid19$source[[1]] <- "https://github.com/CSSEGISandData/COVID-19/raw/master/archived_data/archived_time_series/time_series_19-covid-Confirmed_archived_0325.csv"
covid19$data$original <-
  readr::read_csv(
    covid19$source[[1]]
  )
covid19$data$original |> names() |> head()
covid19$data$original |> select(-c(1,3,4)) -> covid19$data$cleanup
covid19$data$cleanup |> #names() |> head()
  tidyr::pivot_longer(
    cols=-1,
    names_to = "date",
    values_to = "confirmed_cases"
  ) |>
  mutate(
    date=lubridate::mdy(date)
  ) -> covid19$data$cleanup
covid19$data$cleanup$`Country/Region` |> unique() |> sort(decreasing = T)

covid19$data$cleanup |> #class()
  dplyr::filter(
    `Country/Region` %in% c("Japan", "Italy", 'Taiwan*', "US", "Singapore")
  )  -> covid19$data$filtered
.df = covid19$data$filtered

```


```{r}
econDV2::Object(ggplot5)
ggplot5$data$highlighted <- covid19$data$filtered
ggplot5$data$background <- covid19$data$cleanup
attach(ggplot5$data)
ggplot5$base <- function()
{
  ggplot(data=highlighted)
}
ggplot5$geom_highlighted <- function()
{
  geom_line(
    aes(
      x=highlighted$date,
      y=highlighted$confirmed_cases,
      color=highlighted$`Country/Region`
    )
  )
}
ggplot5$base() + ggplot5$geom_highlighted()
```

