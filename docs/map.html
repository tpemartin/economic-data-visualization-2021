<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第 6 章 Map | Economic Data Visualization</title>
  <meta name="description" content="第 6 章 Map | Economic Data Visualization" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="第 6 章 Map | Economic Data Visualization" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第 6 章 Map | Economic Data Visualization" />
  
  
  

<meta name="author" content="Dr. Lin, Mau-Ting" />


<meta name="date" content="2021-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="scale.html"/>
<link rel="next" href="color.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-104915016-7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-104915016-7');

  // ga('set', 'userId', 'USER_ID'); // Set the user ID using signed-in user_id.
</script>
<script src="https://unpkg.com/@popperjs/core@2"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">經濟資料視覺化處理</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#start-a-project"><i class="fa fa-check"></i><b>1.1</b> Start a project</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#中文"><i class="fa fa-check"></i><b>1.2</b> 中文</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#econdv2"><i class="fa fa-check"></i><b>1.3</b> econDV2</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#rprofile"><i class="fa fa-check"></i><b>1.4</b> .Rprofile</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#otherSoftware"><i class="fa fa-check"></i><b>1.5</b> 其他</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html"><i class="fa fa-check"></i><b>2</b> Geometries and Aesthetics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#an-example"><i class="fa fa-check"></i><b>2.1</b> An Example</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#econdv2ggdash"><i class="fa fa-check"></i><b>2.1.1</b> econDV2::ggdash</a></li>
<li class="chapter" data-level="2.1.2" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#script-saving"><i class="fa fa-check"></i><b>2.1.2</b> Script saving</a></li>
<li class="chapter" data-level="2.1.3" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#graph-output"><i class="fa fa-check"></i><b>2.1.3</b> Graph output</a></li>
<li class="chapter" data-level="2.1.4" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#ggdash-more"><i class="fa fa-check"></i><b>2.1.4</b> ggdash more</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#inheritance"><i class="fa fa-check"></i><b>2.2</b> Inheritance</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#data"><i class="fa fa-check"></i><b>2.2.1</b> Data</a></li>
<li class="chapter" data-level="2.2.2" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#aesthetics"><i class="fa fa-check"></i><b>2.2.2</b> Aesthetics</a></li>
<li class="chapter" data-level="2.2.3" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#stop-data-inheritance"><i class="fa fa-check"></i><b>2.2.3</b> Stop data inheritance</a></li>
<li class="chapter" data-level="2.2.4" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#finish-panel"><i class="fa fa-check"></i><b>2.2.4</b> Finish panel</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="geometries-and-aesthetics.html"><a href="geometries-and-aesthetics.html#graph-export"><i class="fa fa-check"></i><b>2.3</b> Graph export</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="layers.html"><a href="layers.html"><i class="fa fa-check"></i><b>3</b> Layers</a>
<ul>
<li class="chapter" data-level="3.1" data-path="layers.html"><a href="layers.html#time-series-data"><i class="fa fa-check"></i><b>3.1</b> Time series data</a></li>
<li class="chapter" data-level="3.2" data-path="layers.html"><a href="layers.html#aesthetics-inheritance"><i class="fa fa-check"></i><b>3.2</b> Aesthetics inheritance</a></li>
<li class="chapter" data-level="3.3" data-path="layers.html"><a href="layers.html#sequence-of-layers"><i class="fa fa-check"></i><b>3.3</b> Sequence of layers</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="layers.html"><a href="layers.html#line-stroke"><i class="fa fa-check"></i><b>3.3.1</b> Line stroke</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="layers.html"><a href="layers.html#create-your-first-geom"><i class="fa fa-check"></i><b>3.4</b> Create your first geom</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="layers.html"><a href="layers.html#layer-adding"><i class="fa fa-check"></i><b>3.4.1</b> Layer adding</a></li>
<li class="chapter" data-level="3.4.2" data-path="layers.html"><a href="layers.html#new-geom-function"><i class="fa fa-check"></i><b>3.4.2</b> New geom function</a></li>
<li class="chapter" data-level="3.4.3" data-path="layers.html"><a href="layers.html#dot-dot-dot"><i class="fa fa-check"></i><b>3.4.3</b> dot-dot-dot</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="layers.html"><a href="layers.html#summary"><i class="fa fa-check"></i><b>3.5</b> Summary</a></li>
<li class="chapter" data-level="3.6" data-path="layers.html"><a href="layers.html#exercise"><i class="fa fa-check"></i><b>3.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="categorical-data.html"><a href="categorical-data.html"><i class="fa fa-check"></i><b>4</b> Categorical data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="categorical-data.html"><a href="categorical-data.html#aesthetics-group"><i class="fa fa-check"></i><b>4.1</b> Aesthetics: group</a></li>
<li class="chapter" data-level="4.2" data-path="categorical-data.html"><a href="categorical-data.html#geom-overlapping"><i class="fa fa-check"></i><b>4.2</b> Geom overlapping</a></li>
<li class="chapter" data-level="4.3" data-path="categorical-data.html"><a href="categorical-data.html#position-stack"><i class="fa fa-check"></i><b>4.3</b> Position: stack</a></li>
<li class="chapter" data-level="4.4" data-path="categorical-data.html"><a href="categorical-data.html#factor"><i class="fa fa-check"></i><b>4.4</b> Factor</a></li>
<li class="chapter" data-level="4.5" data-path="categorical-data.html"><a href="categorical-data.html#proportional-data"><i class="fa fa-check"></i><b>4.5</b> Proportional data</a></li>
<li class="chapter" data-level="4.6" data-path="categorical-data.html"><a href="categorical-data.html#adding-text"><i class="fa fa-check"></i><b>4.6</b> Adding text</a></li>
<li class="chapter" data-level="4.7" data-path="categorical-data.html"><a href="categorical-data.html#more-on-position"><i class="fa fa-check"></i><b>4.7</b> More on position</a></li>
<li class="chapter" data-level="4.8" data-path="categorical-data.html"><a href="categorical-data.html#coordination-flip"><i class="fa fa-check"></i><b>4.8</b> Coordination flip</a></li>
<li class="chapter" data-level="4.9" data-path="categorical-data.html"><a href="categorical-data.html#summary-1"><i class="fa fa-check"></i><b>4.9</b> Summary</a></li>
<li class="chapter" data-level="4.10" data-path="categorical-data.html"><a href="categorical-data.html#exercise-1"><i class="fa fa-check"></i><b>4.10</b> Exercise</a>
<ul>
<li class="chapter" data-level="" data-path="categorical-data.html"><a href="categorical-data.html#section"><i class="fa fa-check"></i>1</a></li>
<li class="chapter" data-level="" data-path="categorical-data.html"><a href="categorical-data.html#section-1"><i class="fa fa-check"></i>2</a></li>
<li class="chapter" data-level="" data-path="categorical-data.html"><a href="categorical-data.html#section-2"><i class="fa fa-check"></i>3</a></li>
<li class="chapter" data-level="" data-path="categorical-data.html"><a href="categorical-data.html#section-3"><i class="fa fa-check"></i>4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="scale.html"><a href="scale.html"><i class="fa fa-check"></i><b>5</b> Scale</a>
<ul>
<li class="chapter" data-level="5.1" data-path="scale.html"><a href="scale.html#legend"><i class="fa fa-check"></i><b>5.1</b> Legend</a></li>
<li class="chapter" data-level="5.2" data-path="scale.html"><a href="scale.html#time-axis"><i class="fa fa-check"></i><b>5.2</b> Time axis</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="scale.html"><a href="scale.html#custom-axis-function"><i class="fa fa-check"></i><b>5.2.1</b> Custom axis function</a></li>
<li class="chapter" data-level="5.2.2" data-path="scale.html"><a href="scale.html#advanced-function"><i class="fa fa-check"></i><b>5.2.2</b> Advanced function</a></li>
<li class="chapter" data-level="5.2.3" data-path="scale.html"><a href="scale.html#time-period"><i class="fa fa-check"></i><b>5.2.3</b> Time period</a></li>
<li class="chapter" data-level="5.2.4" data-path="scale.html"><a href="scale.html#dot-dot-dot-1"><i class="fa fa-check"></i><b>5.2.4</b> dot-dot-dot</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="scale.html"><a href="scale.html#xy-axis"><i class="fa fa-check"></i><b>5.3</b> XY axis</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="scale.html"><a href="scale.html#expansion-and-out-of-bound"><i class="fa fa-check"></i><b>5.3.1</b> Expansion and out-of-bound</a></li>
<li class="chapter" data-level="5.3.2" data-path="scale.html"><a href="scale.html#secondary-axis"><i class="fa fa-check"></i><b>5.3.2</b> Secondary axis</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="scale.html"><a href="scale.html#colorfill"><i class="fa fa-check"></i><b>5.4</b> Color/Fill</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="scale.html"><a href="scale.html#discrete"><i class="fa fa-check"></i><b>5.4.1</b> Discrete</a></li>
<li class="chapter" data-level="5.4.2" data-path="scale.html"><a href="scale.html#continuous"><i class="fa fa-check"></i><b>5.4.2</b> Continuous</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="scale.html"><a href="scale.html#exercise-2"><i class="fa fa-check"></i><b>5.5</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="map.html"><a href="map.html"><i class="fa fa-check"></i><b>6</b> Map</a>
<ul>
<li class="chapter" data-level="6.1" data-path="map.html"><a href="map.html#geographic-geoms"><i class="fa fa-check"></i><b>6.1</b> Geographic geoms</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="map.html"><a href="map.html#point-line-and-polygon"><i class="fa fa-check"></i><b>6.1.1</b> Point, Line and Polygon</a></li>
<li class="chapter" data-level="6.1.2" data-path="map.html"><a href="map.html#multipolygons"><i class="fa fa-check"></i><b>6.1.2</b> Multipolygons</a></li>
<li class="chapter" data-level="6.1.3" data-path="map.html"><a href="map.html#fill-polygons"><i class="fa fa-check"></i><b>6.1.3</b> Fill polygons</a></li>
<li class="chapter" data-level="6.1.4" data-path="map.html"><a href="map.html#application-to-world-map"><i class="fa fa-check"></i><b>6.1.4</b> Application to world map</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="map.html"><a href="map.html#choropleth-map"><i class="fa fa-check"></i><b>6.2</b> Choropleth map</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="map.html"><a href="map.html#backgroup-fill-and-borders"><i class="fa fa-check"></i><b>6.2.1</b> Backgroup fill and borders</a></li>
<li class="chapter" data-level="6.2.2" data-path="map.html"><a href="map.html#choropleth-layer-value-layer"><i class="fa fa-check"></i><b>6.2.2</b> Choropleth layer: value layer</a></li>
<li class="chapter" data-level="6.2.3" data-path="map.html"><a href="map.html#fill-colors"><i class="fa fa-check"></i><b>6.2.3</b> Fill colors</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="map.html"><a href="map.html#map-as-background"><i class="fa fa-check"></i><b>6.3</b> Map as background</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="map.html"><a href="map.html#ggmap"><i class="fa fa-check"></i><b>6.3.1</b> ggmap</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="map.html"><a href="map.html#simple-feature"><i class="fa fa-check"></i><b>6.4</b> Simple feature</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="map.html"><a href="map.html#define-simple-features"><i class="fa fa-check"></i><b>6.4.1</b> Define simple features</a></li>
<li class="chapter" data-level="6.4.2" data-path="map.html"><a href="map.html#form-simple-feature-column"><i class="fa fa-check"></i><b>6.4.2</b> Form simple feature column</a></li>
<li class="chapter" data-level="6.4.3" data-path="map.html"><a href="map.html#form-simple-feature-data-frame"><i class="fa fa-check"></i><b>6.4.3</b> Form simple feature data frame</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="map.html"><a href="map.html#import-simple-feature-data"><i class="fa fa-check"></i><b>6.5</b> Import Simple Feature Data</a></li>
<li class="chapter" data-level="6.6" data-path="map.html"><a href="map.html#projection"><i class="fa fa-check"></i><b>6.6</b> Projection</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="map.html"><a href="map.html#various-projection"><i class="fa fa-check"></i><b>6.6.1</b> Various projection</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="map.html"><a href="map.html#rotate-the-projection"><i class="fa fa-check"></i><b>6.7</b> Rotate the projection</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="color.html"><a href="color.html"><i class="fa fa-check"></i><b>7</b> Color</a>
<ul>
<li class="chapter" data-level="7.1" data-path="color.html"><a href="color.html#group-aesthetics"><i class="fa fa-check"></i><b>7.1</b> Group aesthetics</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/tpemartin/110-1-Economic-Data-Visualization" target="blank">Course Github</a></li>
<li><a href="https://www.ntpu.edu.tw/econ" target="blank">國立臺北大學 經濟學系</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Economic Data Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="map" class="section level1" number="6">
<h1><span class="header-section-number">第 6 章</span> Map</h1>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="map.html#cb121-1" aria-hidden="true" tabindex="-1"></a>mp <span class="ot">&lt;-</span> econDV2<span class="sc">::</span><span class="fu">Map</span>()</span></code></pre></div>
<div id="geographic-geoms" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Geographic geoms</h2>
<div id="point-line-and-polygon" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Point, Line and Polygon</h3>
<p>ggplot2 is equipped with geoms that can draw all kinds of geographic structure.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="map.html#cb122-1" aria-hidden="true" tabindex="-1"></a>fourPoints <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb122-2"><a href="map.html#cb122-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">3</span>),</span>
<span id="cb122-3"><a href="map.html#cb122-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">6</span>, <span class="dv">6</span>)</span>
<span id="cb122-4"><a href="map.html#cb122-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb122-5"><a href="map.html#cb122-5" aria-hidden="true" tabindex="-1"></a>geometry <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb122-6"><a href="map.html#cb122-6" aria-hidden="true" tabindex="-1"></a>geometry<span class="sc">$</span>ggplot <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb122-7"><a href="map.html#cb122-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb122-8"><a href="map.html#cb122-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>fourPoints,</span>
<span id="cb122-9"><a href="map.html#cb122-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(</span>
<span id="cb122-10"><a href="map.html#cb122-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">x=</span>x, <span class="at">y=</span>y</span>
<span id="cb122-11"><a href="map.html#cb122-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb122-12"><a href="map.html#cb122-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb122-13"><a href="map.html#cb122-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Points:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="map.html#cb123-1" aria-hidden="true" tabindex="-1"></a>geometry<span class="sc">$</span>points <span class="ot">&lt;-</span> geometry<span class="sc">$</span><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb123-2"><a href="map.html#cb123-2" aria-hidden="true" tabindex="-1"></a>geometry<span class="sc">$</span>points </span></code></pre></div>
<p>Path:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="map.html#cb124-1" aria-hidden="true" tabindex="-1"></a>geometry<span class="sc">$</span>path <span class="ot">&lt;-</span> geometry<span class="sc">$</span><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_path</span>()</span>
<span id="cb124-2"><a href="map.html#cb124-2" aria-hidden="true" tabindex="-1"></a>geometry<span class="sc">$</span>path</span></code></pre></div>
<p>Polygon</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="map.html#cb125-1" aria-hidden="true" tabindex="-1"></a>geometry<span class="sc">$</span>polygon <span class="ot">&lt;-</span> geometry<span class="sc">$</span><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_polygon</span>()</span>
<span id="cb125-2"><a href="map.html#cb125-2" aria-hidden="true" tabindex="-1"></a>geometry<span class="sc">$</span>polygon</span></code></pre></div>
<hr />
</div>
<div id="multipolygons" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Multipolygons</h3>
<ul>
<li>A school consists of many buildings</li>
</ul>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="map.html#cb126-1" aria-hidden="true" tabindex="-1"></a>bigArea <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb126-2"><a href="map.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">order=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,</span>
<span id="cb126-3"><a href="map.html#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x=</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>, <span class="dv">1</span>,</span>
<span id="cb126-4"><a href="map.html#cb126-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>),</span>
<span id="cb126-5"><a href="map.html#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">y=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">7</span>,</span>
<span id="cb126-6"><a href="map.html#cb126-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">8</span>, <span class="dv">8</span> , <span class="dv">2</span>),</span>
<span id="cb126-7"><a href="map.html#cb126-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">building=</span><span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;building1&quot;</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">&quot;building2&quot;</span>, <span class="dv">3</span>)), <span class="co"># same school</span></span>
<span id="cb126-8"><a href="map.html#cb126-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">contour=</span><span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;outer&quot;</span>,<span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">&quot;outer&quot;</span>,<span class="dv">3</span>)) <span class="co"># two different buildings</span></span>
<span id="cb126-9"><a href="map.html#cb126-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb126-10"><a href="map.html#cb126-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-11"><a href="map.html#cb126-11" aria-hidden="true" tabindex="-1"></a><span class="co"># draw each building separately</span></span>
<span id="cb126-12"><a href="map.html#cb126-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span><span class="fu">geom_polygon</span>(</span>
<span id="cb126-13"><a href="map.html#cb126-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">data=</span>bigArea, </span>
<span id="cb126-14"><a href="map.html#cb126-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">group=</span>building)</span>
<span id="cb126-15"><a href="map.html#cb126-15" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<ul>
<li><p><code>geom_polygon</code> can draw a polygon with hole(s) by using <code>group</code> and <code>subgroup</code> aesthetics, with hole(s) as a polygon inside another.</p>
<ul>
<li>A building with a courtyard has two contours (one for the outer contour, the other for the courtyard contour). Both contours are polygons belong to the same group, but different subgroups.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="map.html#cb127-1" aria-hidden="true" tabindex="-1"></a>fourPoints<span class="sc">$</span>building<span class="ot">=</span><span class="st">&quot;building1&quot;</span></span>
<span id="cb127-2"><a href="map.html#cb127-2" aria-hidden="true" tabindex="-1"></a>fourPoints<span class="sc">$</span>contour<span class="ot">=</span><span class="st">&quot;courtyard&quot;</span></span>
<span id="cb127-3"><a href="map.html#cb127-3" aria-hidden="true" tabindex="-1"></a>fourPoints<span class="sc">$</span>order<span class="ot">=</span><span class="dv">8</span><span class="sc">:</span><span class="dv">11</span></span>
<span id="cb127-4"><a href="map.html#cb127-4" aria-hidden="true" tabindex="-1"></a>bigArea <span class="sc">|</span><span class="er">&gt;</span> <span class="fu">names</span>()</span>
<span id="cb127-5"><a href="map.html#cb127-5" aria-hidden="true" tabindex="-1"></a>bigAreaWithHoles <span class="ot">&lt;-</span></span>
<span id="cb127-6"><a href="map.html#cb127-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(</span>
<span id="cb127-7"><a href="map.html#cb127-7" aria-hidden="true" tabindex="-1"></a>    bigArea,</span>
<span id="cb127-8"><a href="map.html#cb127-8" aria-hidden="true" tabindex="-1"></a>    fourPoints</span>
<span id="cb127-9"><a href="map.html#cb127-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|</span><span class="er">&gt;</span> <span class="fu">arrange</span>(building, order)</span>
<span id="cb127-10"><a href="map.html#cb127-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-11"><a href="map.html#cb127-11" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(bigAreaWithHoles)</span>
<span id="cb127-12"><a href="map.html#cb127-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-13"><a href="map.html#cb127-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb127-14"><a href="map.html#cb127-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">data=</span>bigAreaWithHoles</span>
<span id="cb127-15"><a href="map.html#cb127-15" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb127-16"><a href="map.html#cb127-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb127-17"><a href="map.html#cb127-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb127-18"><a href="map.html#cb127-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">x=</span>x, <span class="at">y=</span>y, </span>
<span id="cb127-19"><a href="map.html#cb127-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">group=</span>building, </span>
<span id="cb127-20"><a href="map.html#cb127-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">subgroup=</span>contour</span>
<span id="cb127-21"><a href="map.html#cb127-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb127-22"><a href="map.html#cb127-22" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="fill-polygons" class="section level3" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Fill polygons</h3>
<ul>
<li>You can give different polygons different fills.</li>
</ul>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="map.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb128-2"><a href="map.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data=</span>bigAreaWithHoles</span>
<span id="cb128-3"><a href="map.html#cb128-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span> </span>
<span id="cb128-4"><a href="map.html#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(</span>
<span id="cb128-5"><a href="map.html#cb128-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb128-6"><a href="map.html#cb128-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">x=</span>x, <span class="at">y=</span>y, </span>
<span id="cb128-7"><a href="map.html#cb128-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group=</span>building, </span>
<span id="cb128-8"><a href="map.html#cb128-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">subgroup=</span>contour,</span>
<span id="cb128-9"><a href="map.html#cb128-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill=</span>building</span>
<span id="cb128-10"><a href="map.html#cb128-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb128-11"><a href="map.html#cb128-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="application-to-world-map" class="section level3" number="6.1.4">
<h3><span class="header-section-number">6.1.4</span> Application to world map</h3>
<p>We apply those <code>geoms</code> to draw some maps.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="map.html#cb129-1" aria-hidden="true" tabindex="-1"></a>world <span class="ot">=</span> ggplot2<span class="sc">::</span><span class="fu">map_data</span>(<span class="st">&quot;world&quot;</span>)</span></code></pre></div>
<ul>
<li><code>group</code> column is for <code>group</code> aesthetics for polygon.</li>
</ul>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="map.html#cb130-1" aria-hidden="true" tabindex="-1"></a>world0 <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">fill=</span><span class="st">&quot;white&quot;</span>, <span class="at">size=</span><span class="fl">0.35</span>) {</span>
<span id="cb130-2"><a href="map.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_polygon</span>(</span>
<span id="cb130-3"><a href="map.html#cb130-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>world,</span>
<span id="cb130-4"><a href="map.html#cb130-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb130-5"><a href="map.html#cb130-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x=</span>long, <span class="at">y=</span>lat,</span>
<span id="cb130-6"><a href="map.html#cb130-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">group=</span>group</span>
<span id="cb130-7"><a href="map.html#cb130-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb130-8"><a href="map.html#cb130-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">color=</span>color, <span class="at">fill=</span>fill, <span class="at">size=</span>size</span>
<span id="cb130-9"><a href="map.html#cb130-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb130-10"><a href="map.html#cb130-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="map.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cartesian crs</span></span>
<span id="cb131-2"><a href="map.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">world0</span>()</span>
<span id="cb131-3"><a href="map.html#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cartesian with fixed aspect ratio</span></span>
<span id="cb131-4"><a href="map.html#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="fu">world0</span>() <span class="sc">+</span> <span class="fu">coord_fixed</span>()</span>
<span id="cb131-5"><a href="map.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Mercator projection: fixed asp, correct direction</span></span>
<span id="cb131-6"><a href="map.html#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="fu">world0</span>() <span class="sc">+</span> <span class="fu">coord_map</span>()</span>
<span id="cb131-7"><a href="map.html#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Mercator projection: fixed asp, correct direction, expand xlim</span></span>
<span id="cb131-8"><a href="map.html#cb131-8" aria-hidden="true" tabindex="-1"></a><span class="fu">world0</span>() <span class="sc">+</span> <span class="fu">coord_map</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">180</span>,<span class="dv">180</span>))</span></code></pre></div>
</div>
</div>
<div id="choropleth-map" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Choropleth map</h2>
<ul>
<li>A map with different <strong>fill</strong>s to show certain social-economic data variation.</li>
</ul>
<div id="backgroup-fill-and-borders" class="section level3" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Backgroup fill and borders</h3>
<p>Though ggplot2 has geom function to work on Choropleth graph directly, I recommend to lay out a background map first.</p>
<p>Map data</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="map.html#cb132-1" aria-hidden="true" tabindex="-1"></a>world <span class="ot">=</span> ggplot2<span class="sc">::</span><span class="fu">map_data</span>(<span class="st">&quot;world&quot;</span>)</span></code></pre></div>
<p>Backgroup map base on Economist style:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="map.html#cb133-1" aria-hidden="true" tabindex="-1"></a>world0_background <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb133-2"><a href="map.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">world0</span>(</span>
<span id="cb133-3"><a href="map.html#cb133-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="st">&quot;white&quot;</span>, </span>
<span id="cb133-4"><a href="map.html#cb133-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;#c8c5be&quot;</span>, </span>
<span id="cb133-5"><a href="map.html#cb133-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="fl">0.15</span>)</span>
<span id="cb133-6"><a href="map.html#cb133-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="choropleth-layer-value-layer" class="section level3" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Choropleth layer: value layer</h3>
<p>Another layer of <code>geom_polygon</code>s but with different fills setup based on social-economic data. Instead of using <code>geom_polygon</code> as the background layer does, <code>geom_map</code> is an easier to use geom for Choropleth graph.</p>
<ul>
<li><p><code>geom_map</code> is a wrapper of <code>geom_polygon</code> but with a much easier setup for Choropleth map purpose.</p></li>
<li><p>use <code>geom_map()+expand_limits()</code></p></li>
</ul>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="map.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_map</span>(</span>
<span id="cb134-2"><a href="map.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data=</span><span class="st">`</span><span class="at">social-economic data</span><span class="st">`</span>,</span>
<span id="cb134-3"><a href="map.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb134-4"><a href="map.html#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">map_id =</span> ...,</span>
<span id="cb134-5"><a href="map.html#cb134-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> ...</span>
<span id="cb134-6"><a href="map.html#cb134-6" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb134-7"><a href="map.html#cb134-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">map =</span><span class="st">`</span><span class="at">map data</span><span class="st">`</span></span>
<span id="cb134-8"><a href="map.html#cb134-8" aria-hidden="true" tabindex="-1"></a>)<span class="sc">+</span></span>
<span id="cb134-9"><a href="map.html#cb134-9" aria-hidden="true" tabindex="-1"></a><span class="fu">expand_limits</span>(</span>
<span id="cb134-10"><a href="map.html#cb134-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">x=</span><span class="st">`</span><span class="at">map data</span><span class="st">`</span><span class="sc">$</span>long, <span class="at">y=</span><span class="st">`</span><span class="at">map data</span><span class="st">`</span><span class="sc">$</span>lat</span>
<span id="cb134-11"><a href="map.html#cb134-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li><p><code>map data</code> from <code>ggplot2::map_data</code> (can be filtered if needed)</p></li>
<li><p><code>social-economic data</code>: a data frame with a column for <code>map_id</code> and a column for <code>fill</code>.</p>
<ul>
<li><p><code>map_id</code> column must consist of the levels of <code>map data</code>’s region column.</p></li>
<li><p><code>fill</code> column: the social-economic data to show.</p></li>
</ul></li>
</ul>
<div id="wdi-example" class="section level4" number="6.2.2.1">
<h4><span class="header-section-number">6.2.2.1</span> WDI example</h4>
<p>Social-economic data</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="map.html#cb135-1" aria-hidden="true" tabindex="-1"></a>se_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(</span>
<span id="cb135-2"><a href="map.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;https://www.dropbox.com/s/78jr6g6xtjz453b/women_in_parliament.json?dl=1&quot;</span></span>
<span id="cb135-3"><a href="map.html#cb135-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb135-4"><a href="map.html#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(se_data)</span></code></pre></div>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="map.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">world0_background</span>() <span class="sc">+</span></span>
<span id="cb136-2"><a href="map.html#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_map</span>(</span>
<span id="cb136-3"><a href="map.html#cb136-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>se_data,</span>
<span id="cb136-4"><a href="map.html#cb136-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(</span>
<span id="cb136-5"><a href="map.html#cb136-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">map_id=</span>country,</span>
<span id="cb136-6"><a href="map.html#cb136-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill=</span>women_in_parliament</span>
<span id="cb136-7"><a href="map.html#cb136-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb136-8"><a href="map.html#cb136-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">map=</span>world</span>
<span id="cb136-9"><a href="map.html#cb136-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<hr />
<p>Fixed country name inconsistency between <code>se_data</code> and <code>world</code> data.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="map.html#cb137-1" aria-hidden="true" tabindex="-1"></a>se_data <span class="sc">|</span><span class="er">&gt;</span> </span>
<span id="cb137-2"><a href="map.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  mp<span class="sc">$</span>choropleth<span class="sc">$</span><span class="fu">rename_valueData_countryname</span>(</span>
<span id="cb137-3"><a href="map.html#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">countryColumnName =</span> <span class="st">&quot;country&quot;</span>,</span>
<span id="cb137-4"><a href="map.html#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="fu">c</span>(</span>
<span id="cb137-5"><a href="map.html#cb137-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Russia&quot;</span><span class="ot">=</span><span class="st">&quot;Russian Federation&quot;</span>,</span>
<span id="cb137-6"><a href="map.html#cb137-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;USA&quot;</span><span class="ot">=</span><span class="st">&quot;United States&quot;</span>,</span>
<span id="cb137-7"><a href="map.html#cb137-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Iran&quot;</span><span class="ot">=</span><span class="st">&quot;Iran, Islamic Rep.&quot;</span>,</span>
<span id="cb137-8"><a href="map.html#cb137-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Egypt&quot;</span><span class="ot">=</span><span class="st">&quot;Egypt, Arab Rep.&quot;</span>,</span>
<span id="cb137-9"><a href="map.html#cb137-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Syria&quot;</span><span class="ot">=</span><span class="st">&quot;Syrian Arab Republic&quot;</span>,</span>
<span id="cb137-10"><a href="map.html#cb137-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Yemen&quot;</span><span class="ot">=</span><span class="st">&quot;Yemen, Rep.&quot;</span>,</span>
<span id="cb137-11"><a href="map.html#cb137-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;UK&quot;</span><span class="ot">=</span><span class="st">&quot;United Kingdom&quot;</span>,</span>
<span id="cb137-12"><a href="map.html#cb137-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Democratic Republic of the Congo&quot;</span><span class="ot">=</span><span class="st">&quot;Congo, Dem. Rep.&quot;</span>,</span>
<span id="cb137-13"><a href="map.html#cb137-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Republic of Congo&quot;</span><span class="ot">=</span><span class="st">&quot;Congo, Rep.&quot;</span>,</span>
<span id="cb137-14"><a href="map.html#cb137-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Ivory Coast&quot;</span><span class="ot">=</span><span class="st">&quot;Cote d&#39;Ivoire&quot;</span>,</span>
<span id="cb137-15"><a href="map.html#cb137-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Venezuela&quot;</span><span class="ot">=</span><span class="st">&quot;Venezuela, RB&quot;</span></span>
<span id="cb137-16"><a href="map.html#cb137-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb137-17"><a href="map.html#cb137-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> se_data</span>
<span id="cb137-18"><a href="map.html#cb137-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-19"><a href="map.html#cb137-19" aria-hidden="true" tabindex="-1"></a><span class="fu">world0_background</span>() <span class="sc">+</span></span>
<span id="cb137-20"><a href="map.html#cb137-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_map</span>(</span>
<span id="cb137-21"><a href="map.html#cb137-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>se_data,</span>
<span id="cb137-22"><a href="map.html#cb137-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(</span>
<span id="cb137-23"><a href="map.html#cb137-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">map_id=</span>country,</span>
<span id="cb137-24"><a href="map.html#cb137-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill=</span>women_in_parliament</span>
<span id="cb137-25"><a href="map.html#cb137-25" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb137-26"><a href="map.html#cb137-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">map=</span>world</span>
<span id="cb137-27"><a href="map.html#cb137-27" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="map.html#cb138-1" aria-hidden="true" tabindex="-1"></a>choropleth0 <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb138-2"><a href="map.html#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">world0_background</span>() <span class="sc">+</span></span>
<span id="cb138-3"><a href="map.html#cb138-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_map</span>(</span>
<span id="cb138-4"><a href="map.html#cb138-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>se_data,</span>
<span id="cb138-5"><a href="map.html#cb138-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(</span>
<span id="cb138-6"><a href="map.html#cb138-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">map_id=</span>country,</span>
<span id="cb138-7"><a href="map.html#cb138-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill=</span>women_in_parliament</span>
<span id="cb138-8"><a href="map.html#cb138-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb138-9"><a href="map.html#cb138-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">map=</span>world</span>
<span id="cb138-10"><a href="map.html#cb138-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb138-11"><a href="map.html#cb138-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb138-12"><a href="map.html#cb138-12" aria-hidden="true" tabindex="-1"></a><span class="fu">choropleth0</span>()</span></code></pre></div>
</div>
</div>
<div id="fill-colors" class="section level3" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Fill colors</h3>
<div id="sequential-color" class="section level4" number="6.2.3.1">
<h4><span class="header-section-number">6.2.3.1</span> Sequential color</h4>
<ul>
<li><p>Color is to signal one direction strength.</p></li>
<li><p>Gradient: Good for spot the highest and the lowest. Not easy to compare neighbors</p></li>
</ul>
<p>Adjust fill limits-values mapping:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="map.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reverse fill high-low value</span></span>
<span id="cb139-2"><a href="map.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">choropleth0</span>() <span class="sc">+</span></span>
<span id="cb139-3"><a href="map.html#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(</span>
<span id="cb139-4"><a href="map.html#cb139-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">&quot;#132B43&quot;</span>,</span>
<span id="cb139-5"><a href="map.html#cb139-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">&quot;#56B1F7&quot;</span>,</span>
<span id="cb139-6"><a href="map.html#cb139-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value=</span><span class="st">&quot;#919191&quot;</span></span>
<span id="cb139-7"><a href="map.html#cb139-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="map.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use binned fill</span></span>
<span id="cb140-2"><a href="map.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">choropleth0</span>() <span class="sc">+</span></span>
<span id="cb140-3"><a href="map.html#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_binned</span>(</span>
<span id="cb140-4"><a href="map.html#cb140-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">&quot;#003870&quot;</span>,</span>
<span id="cb140-5"><a href="map.html#cb140-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">&quot;#d3e3f3&quot;</span>,</span>
<span id="cb140-6"><a href="map.html#cb140-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value=</span><span class="st">&quot;#919191&quot;</span>,</span>
<span id="cb140-7"><a href="map.html#cb140-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">guide=</span><span class="fu">guide_colorbar</span>(</span>
<span id="cb140-8"><a href="map.html#cb140-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">reverse =</span> <span class="cn">FALSE</span>,</span>
<span id="cb140-9"><a href="map.html#cb140-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.vjust =</span> <span class="fl">0.5</span></span>
<span id="cb140-10"><a href="map.html#cb140-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb140-11"><a href="map.html#cb140-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="map.html#cb141-1" aria-hidden="true" tabindex="-1"></a>scales<span class="sc">::</span><span class="fu">colour_ramp</span>(</span>
<span id="cb141-2"><a href="map.html#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="at">high =</span> <span class="st">&quot;#003870&quot;</span>,</span>
<span id="cb141-3"><a href="map.html#cb141-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">&quot;#d3e3f3&quot;</span>)</span>
<span id="cb141-4"><a href="map.html#cb141-4" aria-hidden="true" tabindex="-1"></a>) <span class="ot">-&gt;</span> binPalette</span>
<span id="cb141-5"><a href="map.html#cb141-5" aria-hidden="true" tabindex="-1"></a>scales<span class="sc">::</span><span class="fu">show_col</span>(</span>
<span id="cb141-6"><a href="map.html#cb141-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">binPalette</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="fl">0.8</span>, <span class="dv">1</span>))</span>
<span id="cb141-7"><a href="map.html#cb141-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="ordered-factor" class="section level4" number="6.2.3.2">
<h4><span class="header-section-number">6.2.3.2</span> Ordered Factor</h4>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="map.html#cb142-1" aria-hidden="true" tabindex="-1"></a>se_data2 <span class="ot">&lt;-</span> se_data</span>
<span id="cb142-2"><a href="map.html#cb142-2" aria-hidden="true" tabindex="-1"></a>se_data2<span class="sc">$</span>women_in_parliament <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb142-3"><a href="map.html#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">100</span>), <span class="at">ordered_result =</span> T) <span class="ot">-&gt;</span> .fct</span>
<span id="cb142-4"><a href="map.html#cb142-4" aria-hidden="true" tabindex="-1"></a>.fct <span class="sc">|</span><span class="er">&gt;</span> <span class="fu">class</span>()</span>
<span id="cb142-5"><a href="map.html#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(.fct) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;0-20%&quot;</span>,<span class="st">&quot;20-40%&quot;</span>,<span class="st">&quot;40-60%&quot;</span>,<span class="st">&quot;60-100%&quot;</span>)</span>
<span id="cb142-6"><a href="map.html#cb142-6" aria-hidden="true" tabindex="-1"></a>.fct <span class="ot">-&gt;</span> se_data2<span class="sc">$</span>women_in_parliament</span></code></pre></div>
<hr />
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="map.html#cb143-1" aria-hidden="true" tabindex="-1"></a>myPalette <span class="ot">&lt;-</span> </span>
<span id="cb143-2"><a href="map.html#cb143-2" aria-hidden="true" tabindex="-1"></a>  scales<span class="sc">::</span><span class="fu">colour_ramp</span>(</span>
<span id="cb143-3"><a href="map.html#cb143-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="at">low =</span> <span class="st">&quot;#d3e3f3&quot;</span>, <span class="at">high =</span> <span class="st">&quot;#003870&quot;</span>)</span>
<span id="cb143-4"><a href="map.html#cb143-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb143-5"><a href="map.html#cb143-5" aria-hidden="true" tabindex="-1"></a>scales<span class="sc">::</span><span class="fu">show_col</span>(</span>
<span id="cb143-6"><a href="map.html#cb143-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">myPalette</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.33</span>, <span class="fl">0.66</span>, <span class="dv">1</span>))</span>
<span id="cb143-7"><a href="map.html#cb143-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="map.html#cb144-1" aria-hidden="true" tabindex="-1"></a>choropleth1 <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb144-2"><a href="map.html#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">world0_background</span>() <span class="sc">+</span></span>
<span id="cb144-3"><a href="map.html#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_map</span>(</span>
<span id="cb144-4"><a href="map.html#cb144-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>se_data2,</span>
<span id="cb144-5"><a href="map.html#cb144-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(</span>
<span id="cb144-6"><a href="map.html#cb144-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">map_id=</span>country,</span>
<span id="cb144-7"><a href="map.html#cb144-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill=</span>women_in_parliament</span>
<span id="cb144-8"><a href="map.html#cb144-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb144-9"><a href="map.html#cb144-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">map=</span>world</span>
<span id="cb144-10"><a href="map.html#cb144-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb144-11"><a href="map.html#cb144-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="map.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">choropleth1</span>() <span class="sc">+</span></span>
<span id="cb145-2"><a href="map.html#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb145-3"><a href="map.html#cb145-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&#39;0-20%&#39;</span>,<span class="st">&#39;20-40%&#39;</span>,<span class="st">&#39;40-60%&#39;</span>,<span class="st">&#39;60-100%&#39;</span>),</span>
<span id="cb145-4"><a href="map.html#cb145-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#919191&quot;</span>, <span class="fu">myPalette</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.33</span>, <span class="fl">0.66</span>, <span class="dv">1</span>)))</span>
<span id="cb145-5"><a href="map.html#cb145-5" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb145-6"><a href="map.html#cb145-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb145-7"><a href="map.html#cb145-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">guide_legend</span>(</span>
<span id="cb145-8"><a href="map.html#cb145-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">reverse =</span> T</span>
<span id="cb145-9"><a href="map.html#cb145-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb145-10"><a href="map.html#cb145-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="map.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">choropleth1</span>() <span class="sc">+</span></span>
<span id="cb146-2"><a href="map.html#cb146-2" aria-hidden="true" tabindex="-1"></a>  mp<span class="sc">$</span>scales<span class="sc">$</span><span class="fu">scale_fill_ordered_factor</span>(</span>
<span id="cb146-3"><a href="map.html#cb146-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">.ordered_fct=</span>se_data2<span class="sc">$</span>women_in_parliament,</span>
<span id="cb146-4"><a href="map.html#cb146-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">&quot;#003870&quot;</span>, <span class="at">low=</span> <span class="st">&quot;#d3e3f3&quot;</span>, <span class="at">na.value=</span><span class="st">&quot;#919191&quot;</span></span>
<span id="cb146-5"><a href="map.html#cb146-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb146-6"><a href="map.html#cb146-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb146-7"><a href="map.html#cb146-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="fu">guide_legend</span>(</span>
<span id="cb146-8"><a href="map.html#cb146-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">reverse =</span> T</span>
<span id="cb146-9"><a href="map.html#cb146-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb146-10"><a href="map.html#cb146-10" aria-hidden="true" tabindex="-1"></a>  )  </span></code></pre></div>
</div>
<div id="diverging-color" class="section level4" number="6.2.3.3">
<h4><span class="header-section-number">6.2.3.3</span> Diverging color</h4>
<div id="colorspace" class="section level5 unnumbered">
<h5>colorspace</h5>
<p>Diverging color
When dealing with diverging color it is better to rescale your color mapping source data to [-1, 1].</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="map.html#cb147-1" aria-hidden="true" tabindex="-1"></a>se_data<span class="sc">$</span>women_in_parliament <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb147-2"><a href="map.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  scales<span class="sc">::</span><span class="fu">rescale</span>(</span>
<span id="cb147-3"><a href="map.html#cb147-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">from=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), </span>
<span id="cb147-4"><a href="map.html#cb147-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">to=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb147-5"><a href="map.html#cb147-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> se_data<span class="sc">$</span>women_in_parliament</span></code></pre></div>
<p>colorspace package:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="map.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Register custom color palette</span></span>
<span id="cb148-2"><a href="map.html#cb148-2" aria-hidden="true" tabindex="-1"></a>colorspace<span class="sc">::</span><span class="fu">diverging_hcl</span>(<span class="at">n =</span> <span class="dv">7</span>, <span class="at">h =</span> <span class="fu">c</span>(<span class="dv">255</span>, <span class="dv">12</span>), <span class="at">c =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">80</span>), <span class="at">l =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">97</span>), <span class="at">power =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.3</span>),  <span class="at">register =</span> <span class="st">&quot;man_woman&quot;</span>)</span>
<span id="cb148-3"><a href="map.html#cb148-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-4"><a href="map.html#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="fu">choropleth0</span>() <span class="sc">+</span></span>
<span id="cb148-5"><a href="map.html#cb148-5" aria-hidden="true" tabindex="-1"></a>colorspace<span class="sc">::</span><span class="fu">scale_fill_binned_diverging</span>(</span>
<span id="cb148-6"><a href="map.html#cb148-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="cf">function</span>(x) (x<span class="sc">+</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">50</span>,</span>
<span id="cb148-7"><a href="map.html#cb148-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette=</span><span class="st">&quot;man_woman&quot;</span></span>
<span id="cb148-8"><a href="map.html#cb148-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="scale-with-2-direction-fillcolor" class="section level5" number="6.2.3.3.1">
<h5><span class="header-section-number">6.2.3.3.1</span> scale with 2 direction fill/color</h5>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="map.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">choropleth0</span>()<span class="sc">+</span></span>
<span id="cb149-2"><a href="map.html#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_fill_steps2</span>(</span>
<span id="cb149-3"><a href="map.html#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks=</span><span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.85</span>, <span class="sc">-</span><span class="fl">0.65</span>, <span class="sc">-</span><span class="fl">0.35</span>, <span class="sc">-</span><span class="fl">0.15</span>, <span class="fl">1.5</span>),</span>
<span id="cb149-4"><a href="map.html#cb149-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">high =</span> scales<span class="sc">::</span><span class="fu">muted</span>(<span class="st">&quot;red&quot;</span>),</span>
<span id="cb149-5"><a href="map.html#cb149-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">mid =</span> <span class="st">&quot;#d6ffe6&quot;</span>,</span>
<span id="cb149-6"><a href="map.html#cb149-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">low =</span> <span class="st">&quot;#0a23ff&quot;</span>,</span>
<span id="cb149-7"><a href="map.html#cb149-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">midpoint =</span> <span class="dv">0</span>,</span>
<span id="cb149-8"><a href="map.html#cb149-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.value =</span> <span class="st">&quot;#d9d9d9&quot;</span></span>
<span id="cb149-9"><a href="map.html#cb149-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="map-as-background" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Map as background</h2>
<div id="ggmap" class="section level3" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> ggmap</h3>
<p>Two steps:</p>
<ol style="list-style-type: decimal">
<li><p><code>get_xxxmap</code> to obtain raster map image.</p></li>
<li><p><code>ggmap</code> to produce a gg(plot) object as a background layer.</p></li>
</ol>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="map.html#cb150-1" aria-hidden="true" tabindex="-1"></a>mp<span class="sc">$</span>prepare_dataframe_from<span class="sc">$</span><span class="fu">map</span>()</span></code></pre></div>
</div>
</div>
<div id="simple-feature" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Simple feature</h2>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="map.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>)</span></code></pre></div>
<ul>
<li><a href="https://r-spatial.github.io/sf/" class="uri">https://r-spatial.github.io/sf/</a></li>
</ul>
<p>Another type of geographic data structure.</p>
<ul>
<li><p>a new class. Each value in a simple feature vector represents a form of geometry (called <strong>feature</strong>) and its geographic notation (i.e. latitude and longitude); and could carry its coordinate reference system.</p></li>
<li><p>Each value is a parsing result from <code>sf::st_xxx</code> functions where <code>xxx</code> can be <code>point</code> (台北大學的一個地標，如<a href="https://www.google.com.tw/maps/place/YouBike+1.0/@24.9425965,121.3700117,18z/data=!4m5!3m4!1s0x34681b7d1f8d8569:0x5d135a3058409b3e!8m2!3d24.94317!4d121.36952">YouBike站</a>), <code>multipoint</code> (台北大學所有地標), <code>linestring</code>(台北大學的一條路徑), <code>polygon</code>(台北大學的一棟建築), <code>multilinestring</code>(台北大學的所有路徑), <code>multipolygon</code>(台北大學的所有建築), or <code>geometrycollection</code>(整個台北大學)</p></li>
</ul>
<div id="define-simple-features" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Define simple features</h3>
<p>A simple feature is composed of numeric vector, matrix, or list. No data frame is used.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="map.html#cb152-1" aria-hidden="true" tabindex="-1"></a>geoValues <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb152-2"><a href="map.html#cb152-2" aria-hidden="true" tabindex="-1"></a>geoValues<span class="sc">$</span>simple_feature<span class="sc">$</span>point <span class="ot">&lt;-</span></span>
<span id="cb152-3"><a href="map.html#cb152-3" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_point</span>(</span>
<span id="cb152-4"><a href="map.html#cb152-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fl">24.9433123</span>, <span class="fl">121.3699526</span>)</span>
<span id="cb152-5"><a href="map.html#cb152-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-6"><a href="map.html#cb152-6" aria-hidden="true" tabindex="-1"></a>geoValues<span class="sc">$</span>simple_feature<span class="sc">$</span>multipoint <span class="ot">&lt;-</span></span>
<span id="cb152-7"><a href="map.html#cb152-7" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_multipoint</span>(</span>
<span id="cb152-8"><a href="map.html#cb152-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rbind</span>( <span class="co"># will form a matrix</span></span>
<span id="cb152-9"><a href="map.html#cb152-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="fl">24.9443019</span>, <span class="fl">121.3714944</span>), <span class="co"># 1st point</span></span>
<span id="cb152-10"><a href="map.html#cb152-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="fl">24.9440709</span>, <span class="fl">121.3728518</span>) <span class="co"># 2nd point</span></span>
<span id="cb152-11"><a href="map.html#cb152-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb152-12"><a href="map.html#cb152-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-13"><a href="map.html#cb152-13" aria-hidden="true" tabindex="-1"></a>geoValues<span class="sc">$</span>simple_feature<span class="sc">$</span>linestring <span class="ot">&lt;-</span></span>
<span id="cb152-14"><a href="map.html#cb152-14" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_linestring</span>(</span>
<span id="cb152-15"><a href="map.html#cb152-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rbind</span>(</span>
<span id="cb152-16"><a href="map.html#cb152-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="fl">24.9423755</span>, <span class="fl">121.3679438</span>), <span class="co"># 1st trace point</span></span>
<span id="cb152-17"><a href="map.html#cb152-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="fl">24.9429941</span>, <span class="fl">121.3679432</span>), <span class="co"># 2nd trace point</span></span>
<span id="cb152-18"><a href="map.html#cb152-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="fl">24.9432087</span>, <span class="fl">121.3686713</span>) <span class="co"># 3rd trace point</span></span>
<span id="cb152-19"><a href="map.html#cb152-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb152-20"><a href="map.html#cb152-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-21"><a href="map.html#cb152-21" aria-hidden="true" tabindex="-1"></a>geoValues<span class="sc">$</span>simple_feature<span class="sc">$</span>polygon <span class="ot">&lt;-</span></span>
<span id="cb152-22"><a href="map.html#cb152-22" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_polygon</span>(</span>
<span id="cb152-23"><a href="map.html#cb152-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb152-24"><a href="map.html#cb152-24" aria-hidden="true" tabindex="-1"></a>      <span class="co"># 1st closed trace</span></span>
<span id="cb152-25"><a href="map.html#cb152-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rbind</span>(</span>
<span id="cb152-26"><a href="map.html#cb152-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="fl">24.9441895</span>, <span class="fl">121.3695181</span>),</span>
<span id="cb152-27"><a href="map.html#cb152-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="fl">24.9442244</span>, <span class="fl">121.3692544</span>),</span>
<span id="cb152-28"><a href="map.html#cb152-28" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="fl">24.9437158</span>, <span class="fl">121.3694094</span>),</span>
<span id="cb152-29"><a href="map.html#cb152-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="fl">24.9438647</span>, <span class="fl">121.3696271</span>),</span>
<span id="cb152-30"><a href="map.html#cb152-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="fl">24.9441895</span>, <span class="fl">121.3695181</span>) <span class="co"># close the polygon</span></span>
<span id="cb152-31"><a href="map.html#cb152-31" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb152-32"><a href="map.html#cb152-32" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb152-33"><a href="map.html#cb152-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb152-34"><a href="map.html#cb152-34" aria-hidden="true" tabindex="-1"></a><span class="co"># polygon: a list consists of matrices.</span></span></code></pre></div>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="map.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(geoValues<span class="sc">$</span>simple_feature<span class="sc">$</span>point)</span>
<span id="cb153-2"><a href="map.html#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(geoValues<span class="sc">$</span>simple_feature<span class="sc">$</span>linestring)</span>
<span id="cb153-3"><a href="map.html#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(geoValues<span class="sc">$</span>simple_feature<span class="sc">$</span>polygon)</span>
<span id="cb153-4"><a href="map.html#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="co"># all have sfg class</span></span></code></pre></div>
<p>Simple feature value can be graphed directly via <code>geom_sf()</code></p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="map.html#cb154-1" aria-hidden="true" tabindex="-1"></a>geoValues<span class="sc">$</span>simple_feature<span class="sc">$</span>polygon <span class="sc">|</span><span class="er">&gt;</span> <span class="fu">ggplot</span>()<span class="sc">+</span><span class="fu">geom_sf</span>()</span></code></pre></div>
</div>
<div id="form-simple-feature-column" class="section level3" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> Form simple feature column</h3>
<p>A collection column of multiple simple features.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="map.html#cb155-1" aria-hidden="true" tabindex="-1"></a>sf<span class="sc">::</span><span class="fu">st_sfc</span>(geoValues<span class="sc">$</span>simple_feature) <span class="ot">-&gt;</span> geoValues<span class="sc">$</span>simple_feature_column</span>
<span id="cb155-2"><a href="map.html#cb155-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-3"><a href="map.html#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(geoValues<span class="sc">$</span>simple_feature_column) <span class="co"># &quot;sfc_GEOMETRY&quot; &quot;sfc&quot; </span></span>
<span id="cb155-4"><a href="map.html#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="co"># has class sfc</span></span></code></pre></div>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="map.html#cb156-1" aria-hidden="true" tabindex="-1"></a>geoValues<span class="sc">$</span>simple_feature_column <span class="sc">|</span><span class="er">&gt;</span> </span>
<span id="cb156-2"><a href="map.html#cb156-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span><span class="fu">geom_sf</span>()</span></code></pre></div>
</div>
<div id="form-simple-feature-data-frame" class="section level3" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> Form simple feature data frame</h3>
<ul>
<li>A simple feature data frame is basically a data frame with a column named <strong>geometry</strong> which is a list of each obervation’s simple feature value.</li>
</ul>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="map.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initiate a data frame</span></span>
<span id="cb157-2"><a href="map.html#cb157-2" aria-hidden="true" tabindex="-1"></a>df_sf <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb157-3"><a href="map.html#cb157-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">name=</span><span class="fu">c</span>(<span class="st">&quot;landmark 1&quot;</span>, <span class="st">&quot;must-see landmarks&quot;</span>, <span class="st">&quot;path 1&quot;</span>, <span class="st">&quot;building 1&quot;</span>)</span>
<span id="cb157-4"><a href="map.html#cb157-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb157-5"><a href="map.html#cb157-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-6"><a href="map.html#cb157-6" aria-hidden="true" tabindex="-1"></a><span class="co"># add simple feature column</span></span>
<span id="cb157-7"><a href="map.html#cb157-7" aria-hidden="true" tabindex="-1"></a>df_sf <span class="sc">|</span><span class="er">&gt;</span> sf<span class="sc">::</span><span class="fu">st_set_geometry</span>(geoValues<span class="sc">$</span>simple_feature_column) <span class="ot">-&gt;</span></span>
<span id="cb157-8"><a href="map.html#cb157-8" aria-hidden="true" tabindex="-1"></a>  geoValues<span class="sc">$</span>simple_feature_df</span>
<span id="cb157-9"><a href="map.html#cb157-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-10"><a href="map.html#cb157-10" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df_sf) <span class="co"># only &quot;data frame&quot;</span></span>
<span id="cb157-11"><a href="map.html#cb157-11" aria-hidden="true" tabindex="-1"></a>df_sf <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb157-12"><a href="map.html#cb157-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb157-13"><a href="map.html#cb157-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">geometry=</span>geoValues<span class="sc">$</span>simple_feature_column</span>
<span id="cb157-14"><a href="map.html#cb157-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> df_sf2</span>
<span id="cb157-15"><a href="map.html#cb157-15" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df_sf2) <span class="co"># still a &quot;data frame&quot;</span></span>
<span id="cb157-16"><a href="map.html#cb157-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Must go through sf::st_set_geometry to get sf class</span></span>
<span id="cb157-17"><a href="map.html#cb157-17" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(geoValues<span class="sc">$</span>simple_feature_df) <span class="co"># &quot;sf&quot; &quot;data.frame&quot;</span></span>
<span id="cb157-18"><a href="map.html#cb157-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-19"><a href="map.html#cb157-19" aria-hidden="true" tabindex="-1"></a>geoValues<span class="sc">$</span>simple_feature_df <span class="sc">|</span><span class="er">&gt;</span> <span class="fu">ggplot</span>()<span class="sc">+</span><span class="fu">geom_sf</span>()</span></code></pre></div>
</div>
</div>
<div id="import-simple-feature-data" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Import Simple Feature Data</h2>
<ul>
<li><a href="https://tpemartin.github.io/economic-data-visualization/zh-tw/annotation-and-maps.html#%E8%AE%80%E5%85%A5shp%E6%AA%94" class="uri">https://tpemartin.github.io/economic-data-visualization/zh-tw/annotation-and-maps.html#%E8%AE%80%E5%85%A5shp%E6%AA%94</a></li>
</ul>
</div>
<div id="projection" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Projection</h2>
<div id="mercator-projection" class="section level4" number="6.6.0.1">
<h4><span class="header-section-number">6.6.0.1</span> Mercator projection</h4>
<p>Standard longitude and latitude system when laid out on the Cartesian plane will be a standard Mercator tanget projection with no rotation with center point the mean of data longitudes and latitudes (roughly <code>(0,0)</code>).</p>
<figure>
<div style="text-align: center;">
<img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/Comparison_of_Mercator_projections.svg" style="width: 50%"/>
</div>
<figcaption>
Mercator projection
</figcaption>
</figure>
<p>To gain more control on projection result, use <code>coord_map()</code>:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="map.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">world0</span>() <span class="sc">+</span> <span class="fu">coord_map</span>()</span></code></pre></div>
<div class="alert alert-warning">
<p>By default, <code>coord_map()</code> take <code>xlim=range(world$long)</code>, range has some round off effect which cuts the true range short, creating the erraneous connection problem. To avoid that, set <code>xlim=c(-180, 180)</code> (a little wider than the range rendered).</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="map.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">world0</span>() <span class="sc">+</span> <span class="fu">coord_map</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">180</span>, <span class="dv">180</span>))</span></code></pre></div>
</div>
<p>Set orientation vector:<br />
&gt; A vector c(latitude,longitude,rotation) which describes where the “North Pole” should be when computing the projection.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="map.html#cb160-1" aria-hidden="true" tabindex="-1"></a>center_longitude <span class="ot">=</span> <span class="dv">90</span> <span class="co">#input$center_longitude</span></span>
<span id="cb160-2"><a href="map.html#cb160-2" aria-hidden="true" tabindex="-1"></a>rotation <span class="ot">=</span> <span class="dv">0</span> <span class="co">#input$rotation</span></span>
<span id="cb160-3"><a href="map.html#cb160-3" aria-hidden="true" tabindex="-1"></a>mapproj<span class="sc">::</span><span class="fu">mapproject</span>(</span>
<span id="cb160-4"><a href="map.html#cb160-4" aria-hidden="true" tabindex="-1"></a>  world<span class="sc">$</span>long,</span>
<span id="cb160-5"><a href="map.html#cb160-5" aria-hidden="true" tabindex="-1"></a>  world<span class="sc">$</span>lat,</span>
<span id="cb160-6"><a href="map.html#cb160-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">projection=</span><span class="st">&quot;mercator&quot;</span>,</span>
<span id="cb160-7"><a href="map.html#cb160-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">orientation =</span> <span class="fu">c</span>(<span class="dv">90</span>, center_longitude, rotation)</span>
<span id="cb160-8"><a href="map.html#cb160-8" aria-hidden="true" tabindex="-1"></a>) <span class="ot">-&gt;</span> longlat_new</span>
<span id="cb160-9"><a href="map.html#cb160-9" aria-hidden="true" tabindex="-1"></a>world_new <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb160-10"><a href="map.html#cb160-10" aria-hidden="true" tabindex="-1"></a>  longlat_new[<span class="fu">c</span>(<span class="st">&quot;x&quot;</span>,<span class="st">&quot;y&quot;</span>)]</span>
<span id="cb160-11"><a href="map.html#cb160-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb160-12"><a href="map.html#cb160-12" aria-hidden="true" tabindex="-1"></a>world_new<span class="sc">$</span>group <span class="ot">&lt;-</span> world<span class="sc">$</span>group</span></code></pre></div>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="map.html#cb161-1" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> world <span class="sc">|</span><span class="er">&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(region <span class="sc">!=</span><span class="st">&quot;Antarctica&quot;</span>, <span class="fu">is.na</span>(subregion))</span></code></pre></div>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="map.html#cb162-1" aria-hidden="true" tabindex="-1"></a>center_longitude <span class="ot">=</span> <span class="dv">0</span> <span class="co">#input$center_longitude</span></span>
<span id="cb162-2"><a href="map.html#cb162-2" aria-hidden="true" tabindex="-1"></a>rotation <span class="ot">=</span> <span class="dv">0</span> <span class="co">#input$rotation</span></span></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="map.html#cb163-1" aria-hidden="true" tabindex="-1"></a>world <span class="ot">=</span> ggplot2<span class="sc">::</span><span class="fu">map_data</span>(<span class="st">&quot;world&quot;</span>)</span>
<span id="cb163-2"><a href="map.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">world0</span>()<span class="sc">+</span><span class="fu">coord_map</span>(</span>
<span id="cb163-3"><a href="map.html#cb163-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># xlim=c(-180, 180),</span></span>
<span id="cb163-4"><a href="map.html#cb163-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">orientation =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">0</span>, rotation),</span>
<span id="cb163-5"><a href="map.html#cb163-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">clip=</span><span class="st">&quot;off&quot;</span></span>
<span id="cb163-6"><a href="map.html#cb163-6" aria-hidden="true" tabindex="-1"></a>)<span class="sc">+</span></span>
<span id="cb163-7"><a href="map.html#cb163-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_limits</span>(<span class="at">x=</span><span class="fu">range</span>(world<span class="sc">$</span>long), <span class="at">y=</span><span class="fu">range</span>(world<span class="sc">$</span>lat))</span></code></pre></div>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="map.html#cb164-1" aria-hidden="true" tabindex="-1"></a>world <span class="sc">|</span><span class="er">&gt;</span> <span class="fu">group_by</span>(region) <span class="sc">|</span><span class="er">&gt;</span> </span>
<span id="cb164-2"><a href="map.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="ot">-&gt;</span> world_value</span>
<span id="cb164-3"><a href="map.html#cb164-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb164-4"><a href="map.html#cb164-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_map</span>(</span>
<span id="cb164-5"><a href="map.html#cb164-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>world_value,</span>
<span id="cb164-6"><a href="map.html#cb164-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">map_id=</span>region),</span>
<span id="cb164-7"><a href="map.html#cb164-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;white&quot;</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb164-8"><a href="map.html#cb164-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">map=</span>world</span>
<span id="cb164-9"><a href="map.html#cb164-9" aria-hidden="true" tabindex="-1"></a>  ) </span></code></pre></div>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="map.html#cb165-1" aria-hidden="true" tabindex="-1"></a>gg0<span class="sc">+</span><span class="fu">coord_map</span>(</span>
<span id="cb165-2"><a href="map.html#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">clip=</span><span class="st">&quot;off&quot;</span></span>
<span id="cb165-3"><a href="map.html#cb165-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb165-4"><a href="map.html#cb165-4" aria-hidden="true" tabindex="-1"></a>gg0<span class="sc">+</span><span class="fu">coord_map</span>(</span>
<span id="cb165-5"><a href="map.html#cb165-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlim=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">190</span>, <span class="dv">190</span>)</span>
<span id="cb165-6"><a href="map.html#cb165-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb165-7"><a href="map.html#cb165-7" aria-hidden="true" tabindex="-1"></a>(gg0 <span class="sc">+</span> <span class="fu">coord_map</span>()) <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb165-8"><a href="map.html#cb165-8" aria-hidden="true" tabindex="-1"></a>  plotly<span class="sc">::</span><span class="fu">ggplotly</span>()</span>
<span id="cb165-9"><a href="map.html#cb165-9" aria-hidden="true" tabindex="-1"></a>gg0 <span class="sc">+</span> <span class="fu">coord_quickmap</span>()</span>
<span id="cb165-10"><a href="map.html#cb165-10" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">range</span>(world<span class="sc">$</span>long))</span>
<span id="cb165-11"><a href="map.html#cb165-11" aria-hidden="true" tabindex="-1"></a>o1 <span class="ot">=</span> <span class="dv">90</span> <span class="co">#input$o1</span></span>
<span id="cb165-12"><a href="map.html#cb165-12" aria-hidden="true" tabindex="-1"></a>o2 <span class="ot">=</span> <span class="dv">0</span> <span class="co">#input$o2</span></span>
<span id="cb165-13"><a href="map.html#cb165-13" aria-hidden="true" tabindex="-1"></a>o3 <span class="ot">=</span> <span class="fl">5.1354</span> <span class="co">#input$o3</span></span>
<span id="cb165-14"><a href="map.html#cb165-14" aria-hidden="true" tabindex="-1"></a>gg0<span class="sc">+</span><span class="fu">coord_map</span>(</span>
<span id="cb165-15"><a href="map.html#cb165-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">orientation=</span><span class="fu">c</span>(o1, o2, o3)</span>
<span id="cb165-16"><a href="map.html#cb165-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb165-17"><a href="map.html#cb165-17" aria-hidden="true" tabindex="-1"></a>gg0 <span class="sc">+</span> <span class="fu">coord_quickmap</span>(</span>
<span id="cb165-18"><a href="map.html#cb165-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">orientation=</span><span class="fu">c</span>(o1, o2, o3)</span>
<span id="cb165-19"><a href="map.html#cb165-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb165-20"><a href="map.html#cb165-20" aria-hidden="true" tabindex="-1"></a><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">coord_map</span>(<span class="at">projection =</span> <span class="st">&quot;sinusoidal&quot;</span>)</span>
<span id="cb165-21"><a href="map.html#cb165-21" aria-hidden="true" tabindex="-1"></a><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">coord_map</span>(</span>
<span id="cb165-22"><a href="map.html#cb165-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">orientation =</span> </span>
<span id="cb165-23"><a href="map.html#cb165-23" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="various-projection" class="section level3" number="6.6.1">
<h3><span class="header-section-number">6.6.1</span> Various projection</h3>
<p><img src="https://support.esri.com/~/media/Support/GISDictionary/cylindrical-projection.jpg" alt="cylindrical projection" />
Types of cylindrical map projections you may know include the popular Mercator projection, Cassini, Gauss-Kruger, Miller, Behrmann, Hobo-Dyer, and Gall-Peters.</p>
<div class="figure">
<img src="https://support.esri.com/~/media/Support/GISDictionary/planar-projection.jpg" alt="" />
<p class="caption">planar projection</p>
</div>
<hr />
<p>You can pull out certain country data via filter on <code>region</code>.</p>
<ul>
<li>A country can have many polygons defined by <code>subregion</code>, like Taiwan.</li>
</ul>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="map.html#cb166-1" aria-hidden="true" tabindex="-1"></a>world <span class="sc">|</span><span class="er">&gt;</span> </span>
<span id="cb166-2"><a href="map.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(</span>
<span id="cb166-3"><a href="map.html#cb166-3" aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_detect</span>(region, <span class="st">&quot;Taiwan&quot;</span>)</span>
<span id="cb166-4"><a href="map.html#cb166-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span></span>
<span id="cb166-5"><a href="map.html#cb166-5" aria-hidden="true" tabindex="-1"></a>  taiwan</span>
<span id="cb166-6"><a href="map.html#cb166-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-7"><a href="map.html#cb166-7" aria-hidden="true" tabindex="-1"></a>taiwan <span class="sc">|</span><span class="er">&gt;</span> </span>
<span id="cb166-8"><a href="map.html#cb166-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_polygon</span>(</span>
<span id="cb166-9"><a href="map.html#cb166-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping=</span><span class="fu">aes</span>(</span>
<span id="cb166-10"><a href="map.html#cb166-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">x=</span>long, <span class="at">y=</span>lat, <span class="at">group=</span>group</span>
<span id="cb166-11"><a href="map.html#cb166-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb166-12"><a href="map.html#cb166-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb166-13"><a href="map.html#cb166-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-14"><a href="map.html#cb166-14" aria-hidden="true" tabindex="-1"></a><span class="fu">last_plot</span>() <span class="sc">+</span> <span class="fu">coord_map</span>()</span></code></pre></div>
<ul>
<li>By default, all geom (except geom_sf) is graphed based on Cartesian coordinate system. You need to <code>+coord_map()</code> to do map projection.</li>
</ul>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="map.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the default of coord_map</span></span>
<span id="cb167-2"><a href="map.html#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coord_map</span>(</span>
<span id="cb167-3"><a href="map.html#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">projection =</span> <span class="st">&quot;mercator&quot;</span>,</span>
<span id="cb167-4"><a href="map.html#cb167-4" aria-hidden="true" tabindex="-1"></a>  ...,</span>
<span id="cb167-5"><a href="map.html#cb167-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">parameters =</span> <span class="cn">NULL</span>,</span>
<span id="cb167-6"><a href="map.html#cb167-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">orientation =</span> <span class="cn">NULL</span>,</span>
<span id="cb167-7"><a href="map.html#cb167-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlim =</span> <span class="cn">NULL</span>,</span>
<span id="cb167-8"><a href="map.html#cb167-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylim =</span> <span class="cn">NULL</span>,</span>
<span id="cb167-9"><a href="map.html#cb167-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">clip =</span> <span class="st">&quot;on&quot;</span></span>
<span id="cb167-10"><a href="map.html#cb167-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li>If multiple coordinate systems are detected, the last coordinate system will be used.</li>
</ul>
</div>
</div>
<div id="rotate-the-projection" class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> Rotate the projection</h2>
<!--

## Map overlay



```r
xfun::download_file("https://www.dropbox.com/s/kvjpd1idvsln41k/20-Mar-2021-sanxiaBikeRoute.gpx?dl=1")
econDV2::Object(bikeRoute)
bikeRoute$data$raw <- 
  plotKML::readGPX(
    gpx.file="20-Mar-2021-sanxiaBikeRoute.gpx")
bikeRoute$data$track <-
  bikeRoute$data$raw$tracks[[1]][[1]]
```


```r
ggplot() +
  geom_path(
    data=bikeRoute$data$track,
    mapping=
      aes(
        x=lon,
        y=lat
      )
  ) + coord_map()
```

### Raster image


```r
mp$browse$openstreetmap()
```



```r
mp$copy_paste$osm_bbox()
```
left=121.3512,
bottom=24.9435,
right=121.3849,
top=24.9615



```r
img <- list()
xfun::download_file("https://www.dropbox.com/s/e2kct9xropvg1h5/map_sanxia.png?dl=1")
magick::image_read("map_sanxia.png") -> img$raw
magick::image_resize(
  img$raw,
  geometry = magick::geometry_size_percent(width = 50, height = NULL)
) -> img$resize

magick::image_flatten(
  img$raw
) -> img$flatten

magick::image_write(
  img$resize, path="map_resize.png"
)
```


```r
check_size <- function(x){
  x |> magick::image_raster() |>
    pryr::object_size()
}
```


```r
raster_0 <- magick::image_raster(
  img$raw
)
pryr::object_size(raster_0)

raster_map <- magick::image_raster(img$resize)
pryr::object_size(raster_map)
raster_flatmap <- 
  magick::image_raster(img$flatten)
pryr::object_size(raster_flatmap)


img$raw |> check_size()

img$raw |>
  magick::image_quantize(colorspace="gray") |> 
  check_size()

img$raw |> 
  magick::image_quantize(
    max=30,
    colorspace = "gray") |> #print()
  check_size()

img$raw |> 
  magick::image_quantize(
    max=30,
    colorspace = "gray") |>
  magick::image_resize(
    geometry = magick::geometry_size_percent(80)
  ) |> #print()
  check_size()

img$raw |> 
  magick::image_quantize(
    max=30,
    colorspace = "gray") |>
  magick::image_resize(
    geometry = magick::geometry_size_percent(80)
  ) |>
  magick::image_raster() -> img$resize_gray
```


```r
img$resize_gray$col |> unique() -> colorlimit
ggplot()+
  geom_raster(
    data=img$resize_gray,
    mapping=aes(
      x=x, y=y, fill=col
    )
  )+
  scale_fill_manual(
    limits = colorlimit,
    values = colorlimit
  )+
  theme(
    legend.position = "none"
  )-> gg1

gg1
```



```r
econDV2::Object(overlay)
overlay$raster$google <- {
  ggmap::get_map(
  c(lon=121.3684249, lat=24.9521791),
  zoom=15)
}
overlay$raster$statmen <- {
  
}
overlay$raster$osm <- {
  ggmap::get_map(
    c(left=121.34759,
bottom=24.94224,
right=121.38503,
top=24.96071),
    source="osm"
  )
}
```



```r
attach(bikeRoute$data)
{
  track[c("lon", "lat")] |> as.matrix() |> sf::st_linestring() -> track_linestring
  
  track_linestring |> sf::st_crs()
  
  ggplot()+geom_sf(data=track_linestring, crs=NULL)
  
  ggmap::get_map(
c(lon=121.3684249, lat=24.9521791),
zoom=15  ) -> raster_ntpu
  
  
  ggmap(raster_ntpu) -> gg_ntpu
  
  gg_ntpu |> sf::st_crs()
  raster_ntpu |> sf::st_crs()
  track_linestring |> sf::st_crs()
  
  gg_ntpu + geom_sf(
    data=track_linestring,
    inherit.aes = F
  )+theme_void()

  # gg_ntpu and geom_sf are two different coordinate systems by concepts. Here both has no crs setting. So the warning is wrong.
}
detach(bikeRoute$data)
```


```r
us <- c(left = -125, bottom = 25.75, right = -67, top = 49)
get_stamenmap(us, zoom = 5, maptype = "toner-lite") |> ggmap() 
```


## Raster map 


```r
us <- c(left = -125, bottom = 25.75, right = -67, top = 49)
bbox_ntpu <- 
  c(top=24.94709,
right=121.37619,
bottom=24.93842,
left=121.36230)
ggmap::get_map(
  location= c(lon=121.37015,lat=24.94311),
  source="osm"
)
ggmap::get_openstreetmap(
  bbox=bbox_ntpu
) -> map_ntpu 
get_stamenmap(us, zoom = 5, maptype = "toner-lite") %>% ggmap()  -> gg0
```


24.94709 (top)
121.37619 (right)
24.93842
121.36230




```r
magick::image_read("/Users/martinl/Downloads/map_ntpu.png") -> map_ntpu
magick::image_raster(map_ntpu) -> raster_ntpu
pryr::object_size(raster_ntpu) # extremely big
```

  * **Raster** is not an efficient way to store image information. 
  

```r
newTaipeiBBox <- c(xmin=121.28263, ymin=24.67316, xmax=122.00640, ymax=25.29974)
```


## open street map (OSM)

  * <https://openstreetmap.org>


```r
browseURL("https://openstreetmap.org")
```

## ggmap


```r
ggmap::get_openstreetmap(
  
)
```



```r
library("ggmap")
#  Loading required package: ggplot2
#  Registered S3 methods overwritten by 'ggplot2':
#    method         from 
#    [.quosures     rlang
#    c.quosures     rlang
#    print.quosures rlang
#  Google's Terms of Service: https://cloud.google.com/maps-platform/terms/.
#  Please cite ggmap if you use it! See citation("ggmap") for details.

us <- c(left = -125, bottom = 25.75, right = -67, top = 49)
get_stamenmap(us, zoom = 5, maptype = "toner-lite") %>% ggmap()  -> gg0
gg0 |> class()
gg0$data
ggmap |> body() |> clipr::write_clip()
```

-->

</div>
</div>
<!--參考答案開關--> 
<script>
$(document).ready(function(){
  $('<button class="flip">More info...</button>').insertBefore(".more");
  $(".flip").click(function(){
    $(this).next().slideToggle();
  });
})
</script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="js/bootstrap.min.js"></script>

<!-- 2. Include library -->
<script src="js/clipboard.min.js"></script>

<!-- 3. Instantiate clipboard by passing a string selector -->

<script>
var clipboard = new Clipboard('.btn');
clipboard.on('success', function(e) {
    console.log(e);
});
clipboard.on('error', function(e) {
    console.log(e);
});
</script>

<script>
  var copyTextareaBtn = document.querySelector('.js-textareacopybtn');

copyTextareaBtn.addEventListener('click', function(event) {
  var copyTextarea = document.querySelector('.js-copytextarea');
  copyTextarea.select();

  try {
    var successful = document.execCommand('copy');
    var msg = successful ? 'successful' : 'unsuccessful';
    console.log('Copying text command was ' + msg);
  } catch (err) {
    console.log('Oops, unable to copy');
  }
});
</script>

<script>
  function CopyToClipboard(containerid) {
if (document.selection) {
    var range = document.body.createTextRange();
    range.moveToElementText(document.getElementById(containerid));
    range.select().createTextRange();
    document.execCommand("copy");

} else if (window.getSelection) {
    var range = document.createRange();
     range.selectNode(document.getElementById(containerid));
     window.getSelection().addRange(range);
     document.execCommand("copy");
     alert("text copied")
}}
</script>

<script>
  $( document ).ready(function() {
    addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
});
</script>
<!--
<script>
  $(document).ready(function() {
  var codes = document.querySelectorAll('pre:not([class])');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Details';
    // <details><summary>Details</summary></details>
    d.appendChild(s);
    // move the code into <details>
    p.replaceChild(d, code);
    d.appendChild(code);
  }
});
</script>
-->
<!--
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'https://gitter.im/NTPU-Econ/Econometrics'
  };
</script>

<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
-->
<script src="js/documentReady.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="scale.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="color.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"theme": "united"
});
});
</script>

</body>

</html>
